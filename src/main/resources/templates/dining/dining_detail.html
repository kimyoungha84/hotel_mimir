<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" th:href="@{/css/header.css}" />
<link rel="stylesheet" th:href="@{/css/footer.css}" />
<style>
body{
margin: 0px; 
}


.north-tab{
height : 32px;
margin-left: 250px;
color: white;
}

.ico {
    display: inline-block;
    vertical-align: middle;
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;
}

.ico-breadcrumb-home {
    width: 1.5rem;
    height: 1.5rem;
    background-image: url('home_img.svg');
    color: white;
}

.ico-dining-type {
  width: 2.4rem;
  height: 2.4rem;
  background-color: #c3c3c3;
  border-radius: 50%;
  display: inline-block;
  vertical-align: middle;
  margin-right: 0.6rem;
  background-image: url('/dining/images/dining_type.svg');
  background-repeat: no-repeat;
  background-position: center;
  background-size: 60% 60%;
}

.ico-dining-location {
  width: 2.4rem;
  height: 2.4rem;
  background-color: #c3c3c3;
  border-radius: 50%;
  display: inline-block;
  vertical-align: middle;
  margin-right: 0.6rem;
  background-image: url('/dining/images/dining_location.svg');
  background-repeat: no-repeat;
  background-position: center;
  background-size: 60% 60%;
}

.ico-dining-opertime {
  width: 2.4rem;
  height: 2.4rem;
  background-color: #c3c3c3;
  border-radius: 50%;
  display: inline-block;
  vertical-align: middle;
  margin-right: 0.6rem;
  background-image: url('/dining/images/dining_opertime.svg');
  background-repeat: no-repeat;
  background-position: center;
  background-size: 60% 60%;
}

.ico-dining-inquiry {
  width: 2.4rem;
  height: 2.4rem;
  background-color: #c3c3c3;
  border-radius: 50%;
  display: inline-block;
  vertical-align: middle;
  margin-right: 0.6rem;
  background-image: url('/dining/images/dining_inquiry.svg');
  background-repeat: no-repeat;
  background-position: center;
  background-size: 60% 60%;
}

.main-img{
	position: fixed;
    overflow: hidden;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    max-height: 800px;

}

.main-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(70%);
}

.main-img-txt-area{
	font-size: 60px;
	color: white;
	text-align: center;
	margin-top: 300px;
	font-weight: 500;
}

.content{
	display: -webkit-box;
    display: -webkit-flex;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    align-items: center;
    max-width: 140rem;
    margin-top: 300px;
    background-color: white;
    flex-direction: column; /* 수직으로 배치 */
    

}
.category-wrap{
    display: flex;
    -webkit-box-align: center;
    align-items: center;
    max-width: 140rem;
    margin-right: 300px;
    padding: 0rem 0rem;

}
.category-img {
	position: relative;
	align-items: center;
    width: 25.8rem;
    height: 14.5rem;
    overflow: hidden;
    margin-right: auto;

}
.category-img > img {
	position: absolute;
    top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
    width: 70%;
    height: 70%;
    object-fit: contain;

}

.di-info-wrap{

margin-top: 100px;
display: flex;
width: 75%;

}

.di-info-header{
margin-right: auto;


}

.di-info-header-tit{

text-align: start;


}

.info-list{
  width: 100%;
  margin-top: auto;
  margin-bottom: auto;
  padding: 2.5rem 0rem;
  border-bottom: 1px solid #333;

}

.list-row{
padding: 4rem 0rem;
border-bottom: 1px solid #dddddd;

}

.info-row{
display: flex;
}

.info-list-wrap{
width:70%;
border-top: 2px solid #333;
}

.list-col-1{
display: flex;
width: 30%;
font-weight: 500;
font-size: 18px;
align-items: center;
}

.list-col-2{
  display: flex;
  align-items: center;
  font-size: 18px;
}


.menu-wrap{

margin-top: 200px;
width: 75%;
margin-left: auto;
margin-right: auto;


}

.menu-list-wrap{

width: 100%;
border-top : 2px solid #333;


}

.menu-list{
  width: 100%;
  margin-top: auto;
  margin-bottom: auto;
  padding: 3rem 0rem;
  border-bottom: 1px solid #333;

}

.menu-list .list-col-1 {
  align-items: flex-start;
}

.gallery-wrap{
	margin-top: 200px;
	width: 75%;
	margin-left: auto;
	margin-right: auto;

}

.gallery-con{
	width: 70%;
	margin-left: 400px;


}

.gallery-con img{
width: 100%;         /* 이미지가 부모 카드의 너비에 맞게 크기 조정 */
  height: 100%;        /* 이미지가 부모 카드의 높이에 맞게 크기 조정 */
  object-fit: cover;   /* 부모 요소를 덮도록 이미지 크기 조정 (비율 유지) */
  transform-origin: center center;
}

.gallery-carousel {
  display: flex;
  flex-direction: column;
  align-items: flex-end; /* 오른쪽 정렬 */
  margin-left: auto;  
  /* width: auto;  // 필요시 조정 */
}
.gallery-image-area {
  width: 1000px;   /* 더 크게 */
  height: 600px;   /* 더 크게 */
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 2rem;
}
.gallery-image-area img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 1rem;
}
.gallery-controls {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  margin-top: 1.5rem;
}

/* pagination.html에서 가져온 mimir-pg-btn 스타일 */
.mimir-pg-btn {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 1.5px solid #222;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.18s, border 0.18s;
  padding: 0;
  position: relative;
}
.mimir-pg-btn:disabled,
.mimir-pg-btn.mimir-pg-disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: #fff;
}
.mimir-pg-btn img {
  width: 18px;
  height: 18px;
  transition: filter 0.18s;
}
.mimir-pg-btn:not(:disabled):not(.mimir-pg-disabled):hover {
  background: #111;
  border: 1.5px solid #111;
  transition: background 0.18s, border 0.18s;
}
.mimir-pg-btn:not(:disabled):not(.mimir-pg-disabled):hover img {
  filter: brightness(0) invert(1);
  transition: filter 0.18s;
}
.gallery-progress-bar {
  width: 120px;
  height: 2px;
  background: #ddd;
  margin-right: 1rem;
  position: relative;
}
.gallery-progress {
  height: 100%;
  background: #222;
  width: 0%;
  position: absolute;
  left: 0; top: 0;
  transition: width 0.3s;
}
.gallery-btn {
  width: 40px; height: 40px;
  border: 1px solid #222;
  border-radius: 50%;
  background: #fff;
  font-size: 1.5rem;
  cursor: pointer;
}
.gallery-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}
.gallery-flex-row {
  display: flex;
  flex-direction: row;
  align-items: flex-start; /* 타이틀, 이미지 위쪽 정렬 */
  width: 100%;
  gap: 2rem;
  /* flex-wrap: wrap;  // 필요시 추가 */
}
.gallery-title {
  margin: 0 2rem 0 0;
  font-size: 2.2rem;
  font-weight: bold;
  min-width: 120px;
  align-self: flex-start;
  /* 왼쪽 정렬 */
}
.additional-info-wrap {
  width: 100%;
  /* margin-left: auto;
  margin-right: auto; */
  margin-top: 130px;
  display: flex;
  flex-direction: column;
}
.additional-info-wrap h2 {
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 1.5rem;
}
.additional-info-content {
  font-size: 1.1rem;
  line-height: 2;
  color: #222;
  white-space: pre-line;
  background: none;
  padding: 0;
  border-radius: 0;
}
.additional-info-wrap .gallery-flex-row {
  margin-top: 0;
}
.additional-info-wrap .gallery-title {
  font-size: 2.2rem;
  font-weight: bold;
  min-width: 120px;
  margin: 0 0 1.5rem 0;
}
.additional-info-content-bg {
  background: #f7f7f7;
  border-radius: 8px;
  padding: 2.5rem 3rem 2.5rem 3rem;
}
.additional-info-content {
  font-size: 1.1rem;
  line-height: 2;
  color: #222;
  white-space: pre-line;
  background: none;
  padding: 0;
  border-radius: 0;
}
.section-divider {
  width: 100%;
  border: none;
  border-top: 1px solid #ddd;
  margin: 40px 0 32px 0;
}
.btn-area {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 60px;
}
.list-btn {
  background: #111;
  color: #fff;
  font-size: 1.1rem;
  font-weight: 500;
  border: none;
  border-radius: 6px;
  padding: 0.9rem 3.5rem;
  cursor: pointer;
  transition: background 0.2s;
}
.list-btn:hover {
  background: #333;
}
.floating-reserve-btn {
  position: fixed;
  right: 40px;
  bottom: 40px;
  width: 140px;
  height: 140px;
  background: #856956;
  border-radius: 50%;
  box-shadow: 0 4px 24px 0 rgba(0,0,0,0.13);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  text-decoration: none;
  transition: box-shadow 0.2s, background 0.2s;
}
.floating-reserve-btn:hover {
  box-shadow: 0 8px 32px 0 rgba(0,0,0,0.18);
  background: #6d5747;
}
.reserve-icon {
  width: 38px;
  height: 38px;
  margin-bottom: 7px;
  display: block;
}
.reserve-text {
  color: #fff;
  font-size: 1.25rem;
  font-weight: 500;
  letter-spacing: -0.5px;
  text-align: center;
  line-height: 1.1;
  text-shadow: 0 1px 2px rgba(0,0,0,0.10);
}

/* 예약 패널 스타일 */
.reservation-panel {
  position: fixed;
  right: -400px;
  bottom: 0; /* 화면 하단에 붙임 */
  width: 400px;
  height: 60vh; /* 높이를 60%로 줄임 */
  background: #f8f8f8;
  box-shadow: -2px 0 10px rgba(0,0,0,0.1);
  transition: right 0.3s ease;
  z-index: 1001; /* 슬라이드 모달보다 낮은 z-index */
  display: flex;
  flex-direction: column;
  border-top-left-radius: 12px; /* 상단 왼쪽 모서리 둥글게 */
}

.reservation-panel.active {
  right: 0;
}

.reservation-header {
  background: #333;
  color: white;
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.reservation-header h3 {
  margin: 0;
  font-size: 1.2rem;
}

.close-btn {
  background: none;
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.reservation-content {
  padding: 20px;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.dining-info, .guest-info {
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: all 0.2s ease;
}

.dining-info:hover, .guest-info:hover {
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
  transform: translateY(-1px);
}

.dining-info h4, .guest-info h4 {
  margin: 0 0 10px 0;
  color: #333;
  font-size: 1rem;
}

.guest-summary {
  display: flex;
  gap: 15px;
  margin-bottom: 10px;
}

.guest-summary span {
  font-size: 0.9rem;
  color: #666;
}

/* .edit-guest-btn 스타일 제거 - 더 이상 사용하지 않음 */

.search-btn {
  background: #856956;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.1rem;
  font-weight: 500;
  margin-top: auto;
}

/* 슬라이드 모달 스타일 */
.modal-slide {
  position: fixed;
  right: 400px; /* 예약 패널 바로 왼쪽에서 시작 */
  bottom: 0; /* 화면 하단에 붙임 */
  width: 400px;
  height: 60vh; /* 예약 패널과 동일한 높이 */
  background: white;
  box-shadow: -2px 0 10px rgba(0,0,0,0.1);
  transition: transform 0.3s ease, visibility 0.3s ease;
  z-index: 1002;
  display: flex;
  flex-direction: column;
  transform: translateX(100%); /* 처음에는 예약 패널 뒤에 숨겨져 있음 */
  visibility: hidden; /* 초기에는 보이지 않음 */
  opacity: 0; /* 투명도 추가 */
  border-top-left-radius: 12px; /* 상단 왼쪽 모서리 둥글게 */
}

.modal-slide.active {
  transform: translateX(0); /* 활성화되면 예약 패널 왼쪽으로 슬라이드 */
  visibility: visible; /* 활성화되면 보임 */
  opacity: 1; /* 완전히 보임 */
}

.modal-content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.modal-header {
  background: #333;
  color: white;
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-header h3 {
  margin: 0;
  font-size: 1.2rem;
}

/* 다이닝 선택 스타일 */
.dining-options {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

.dining-option {
  display: flex;
  align-items: center;
  padding: 15px;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 15px;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
}

.dining-option:hover {
  border-color: #856956;
  box-shadow: 0 2px 8px rgba(133, 105, 86, 0.2);
}

.dining-option.selected {
  border-color: #856956;
  background: #f8f6f4;
}

.dining-option img {
  width: 80px;
  height: 60px;
  object-fit: cover;
  border-radius: 4px;
  margin-right: 15px;
}

.dining-details {
  flex: 1;
}

.dining-details h4 {
  margin: 0 0 5px 0;
  font-size: 1.1rem;
  color: #333;
}

.dining-details p {
  margin: 2px 0;
  font-size: 0.9rem;
  color: #666;
}

.selection-indicator {
  width: 20px;
  height: 20px;
  border: 2px solid #ddd;
  border-radius: 50%;
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
}

.dining-option.selected .selection-indicator {
  border-color: #856956;
  background: #856956;
}

/* 인원수 선택 스타일 */
.guest-selection {
  flex: 1;
  padding: 20px;
}

.guest-type {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 0;
  border-bottom: 1px solid #eee;
}

.guest-type:last-child {
  border-bottom: none;
}

.guest-type span {
  font-size: 1.1rem;
  color: #333;
}

.counter {
  display: flex;
  align-items: center;
  gap: 15px;
}

.counter button {
  width: 30px;
  height: 30px;
  border: 1px solid #ddd;
  background: white;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  color: #333;
}

.counter button:hover {
  background: #f0f0f0;
}

.counter span {
  font-size: 1.2rem;
  font-weight: 500;
  min-width: 30px;
  text-align: center;
}

.select-btn {
  background: #333;
  color: white;
  border: none;
  padding: 15px;
  margin: 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.1rem;
  font-weight: 500;
}

/* 오버레이 */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.overlay.active {
  opacity: 1;
  visibility: visible;
}
</style>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>
<div id="container">
<main id="content">
<!-- <div class="north-tab">
<i class="ico ico-breadcrumb-home" aria-hidden="true"></i>
<span>  >  다이닝  > <span>스테이,모던 레스토랑</span></span> 
</div> -->

<div class="main-img">
  <img th:src="@{${diningInfo.dining_main_image}}" alt="다이닝 메인 이미지" loading="lazy">
</div>
<div class="main-img-txt-area" th:text="${diningInfo.dining_name}">
스테이, 모던 레스토랑
</div>
<div class="content">
    <div class="category-wrap">
        <div class="category-img">
          <img th:src="@{${diningInfo.dining_logo_image}}" alt="다이닝 로고 이미지" loading="lazy">
        </div>
        <div class="category-copy" th:if="${diningInfo.dining_introduction != null and !#strings.isEmpty(diningInfo.dining_introduction)}">
            <p class="txt01" style="font-size: 17px;" th:text="${diningInfo.dining_introduction}">소개내용</p>
        </div>
    </div> 

    <div class="di-info-wrap">
        <div class="di-info-header">
            <h1 class="di-info-header-tit">다이닝 정보</h1>
        </div>
        <div class="info-list-wrap">
        
        <div class="info-list">
        <div class="info-row">
        <div class="list-col-1">
          <i class="ico ico-dining-type" aria-hidden="true"></i>
        타입
        </div>
        <div class="list-col-2" th:text="${diningInfo.type}">
        타입내용
        </div>
        </div>
        </div>
        <div class="info-list">
        <div class="info-row">
        <div class="list-col-1">
          <i class="ico ico-dining-location" aria-hidden="true"></i>
        위치
        </div>
        <div class="list-col-2" th:text="${diningInfo.location}">
        위치내용
        </div>
        </div>
        </div>
        <div class="info-list">
        <div class="info-row">
        <div class="list-col-1">
          <i class="ico ico-dining-opertime" aria-hidden="true"></i>
        영업시간
        </div>
        <div class="list-col-2" style="white-space: pre-line;" th:text="${diningInfo.dining_operation_hours}">
        영업시간내용
        </div>
        </div>
        </div>
        <div class="info-list">
        <div class="info-row">
        <div class="list-col-1">
          <i class="ico ico-dining-inquiry" aria-hidden="true"></i>
        문의 및 예약
        </div>
        <div class="list-col-2" style="display: flex; align-items: center;">
          <span th:text="${diningInfo.phone_number}">프렌치</span>
          <th:block th:if="${#strings.equalsIgnoreCase(#strings.trim(diningInfo.dining_resv_availability), 'Y')}">
            <a th:href="@{/diningResv(diningId=${diningInfo.dining_id})}" style="margin-left: 50px;">
              <button type="button" class="list-btn">예약하기</button>
            </a>
          </th:block>
        </div>
        </div>
        </div>
        </div>
    </div> 
    
    <div class="menu-wrap" th:if="${groupedMenuMap != null and !#maps.isEmpty(groupedMenuMap)}">
  <h1>대표메뉴</h1>
  <div class="menu-list-wrap">
    <th:block th:each="entry : ${groupedMenuMap}">
      <div class="menu-list">
        <div class="info-row">
          <div class="list-col-1" th:text="${entry.key}"></div>
          <div class="list-col-2" style="display: flex; gap: 250px;">
            <th:block th:each="menu : ${entry.value}">
              <div style="min-width: 180px;">
                <div th:text="${menu.menu_name}"></div>
                <div style="margin-top: 16px;">
                  <span th:text="${#numbers.formatInteger(menu.price, 0, 'COMMA')}"></span> KRW
                </div>
              </div>
            </th:block>
          </div>
        </div>
      </div>
    </th:block>
  </div>
</div>
    
    <div class="gallery-wrap" th:if="${diningInfo.dining_carousel_images != null and #lists.size(diningInfo.dining_carousel_images) > 0}">
      <div class="gallery-flex-row">
        <h1 class="gallery-title">갤러리</h1>
        <div class="gallery-carousel">
        <!-- 이미지가 있을 때  여기가 dining_carousel_images들어갈 에정-->
        <div class="gallery-image-area" th:if="${diningInfo.dining_carousel_images != null and #lists.size(diningInfo.dining_carousel_images) > 0}">
          <img th:src="@{${diningInfo.dining_carousel_images[0]}}" alt="갤러리 이미지" id="gallery-main-img">
        </div>
        <!-- 이미지가 없을 때 -->
        <div class="gallery-image-area" th:if="${diningInfo.dining_carousel_images == null or #lists.size(diningInfo.dining_carousel_images) == 0}">
          <img src="/dining/images/no_image.png" alt="이미지 없음" id="gallery-main-img">
        </div>
        <div class="gallery-controls">
          <!-- 프로그래스바 -->
          <div class="gallery-progress-bar">
            <div class="gallery-progress" id="gallery-progress"></div>
          </div>
          <span id="gallery-index">
            <span id="gallery-current">1</span>/<span id="gallery-total">1</span>
          </span>
          <!-- pagination 스타일 버튼 -->
          <button class="mimir-pg-btn" id="gallery-prev" disabled>
            <img src="/pagination/images/prevPage_enable.svg" alt="이전">
          </button>
          <button class="mimir-pg-btn" id="gallery-next">
            <img src="/pagination/images/nextPage_enable.svg" alt="다음">
          </button>
        </div>
      </div>
      <!-- 갤러리 이미지 리스트(숨김, JS에서 사용) -->
      <div id="gallery-image-list" style="display:none;">
        <span th:each="img : ${diningInfo.dining_carousel_images}" th:text="${img}"></span>
      </div>
    </div>

      <!-- 추가 정보 섹션 -->
      <div class="additional-info-wrap" th:if="${diningInfo.dining_detailinfo != null and !#strings.isEmpty(diningInfo.dining_detailinfo)}">
        <h1 class="gallery-title">추가 정보</h1>
        <div class="additional-info-content-bg">
          <div class="additional-info-content" style="color:#707070" th:utext="${diningInfo.dining_detailinfo}"></div>
        </div>
      </div>
      <hr class="section-divider">
      <div class="btn-area">
        <button type="button" class="list-btn" onclick="window.history.back()">목록</button>
      </div>
</div> 

<!-- 화면 우측 하단 예약하기 플로팅 버튼 -->
<a href="#" class="floating-reserve-btn" onclick="openReservationPanel(event)">
  <img src="/dining/images/reservation_calender.svg" alt="예약 아이콘" class="reserve-icon">
  <span class="reserve-text">예약하기</span>
</a>

<!-- 예약 패널 (오른쪽) -->
<div id="reservation-panel" class="reservation-panel">
  <div class="reservation-header">
    <h3>다이닝 예약</h3>
    <button class="close-btn" onclick="closeReservationPanel()">×</button>
  </div>
  <div class="reservation-content">
    <div class="dining-info" onclick="openDiningModal()" style="cursor: pointer;">
      <h4>다이닝</h4>
      <p id="selected-dining-name" th:text="${diningInfo.dining_name}">스테이, 모던 레스토랑</p>
      <span style="font-size: 12px; color: #666;">클릭하여 변경</span>
    </div>
    <div class="guest-info" onclick="openGuestModal()" style="cursor: pointer;">
      <h4>인원</h4>
      <div class="guest-summary">
        <span>성인 <span id="adult-count">1</span></span>
        <span>어린이 <span id="child-count">0</span></span>
        <span>유아 <span id="infant-count">0</span></span>
      </div>
      <span style="font-size: 12px; color: #666;">클릭하여 변경</span>
    </div>
    <button class="search-btn" onclick="searchReservation()">검색</button>
  </div>
</div>

<!-- 다이닝 선택 모달 (왼쪽 슬라이드) -->
<div id="dining-modal" class="modal-slide">
  <div class="modal-content">
    <div class="modal-header">
      <h3>다이닝 선택</h3>
      <button class="close-btn" onclick="closeDiningModal()">×</button>
    </div>
    <div class="dining-options">
      <div class="dining-option" data-dining-id="1" onclick="selectDining(this, '더 라운지', '79층')">
        <img src="/dining/images/lounge.jpg" alt="더 라운지">
        <div class="dining-details">
          <h4>더 라운지</h4>
          <p>타입 | 레스토랑 & 바</p>
          <p>위치 | 79층</p>
        </div>
        <div class="selection-indicator"></div>
      </div>
      <div class="dining-option selected" data-dining-id="2" onclick="selectDining(this, '스테이, 모던 레스토랑', '81층')">
        <img src="/dining/images/stay.jpg" alt="스테이, 모던 레스토랑">
        <div class="dining-details">
          <h4>스테이, 모던 레스토랑</h4>
          <p>타입 | 프렌치</p>
          <p>위치 | 81층</p>
        </div>
        <div class="selection-indicator"></div>
      </div>
    </div>
    <button class="select-btn" onclick="confirmDiningSelection()">선택</button>
  </div>
</div>

<!-- 인원수 선택 모달 (왼쪽 슬라이드) -->
<div id="guest-modal" class="modal-slide">
  <div class="modal-content">
    <div class="modal-header">
      <h3>인원수</h3>
      <button class="close-btn" onclick="closeGuestModal()">×</button>
    </div>
    <div class="guest-selection">
      <div class="guest-type">
        <span>성인</span>
        <div class="counter">
          <button onclick="decreaseCount('adult')">-</button>
          <span id="adult-counter">1</span>
          <button onclick="increaseCount('adult')">+</button>
        </div>
      </div>
      <div class="guest-type">
        <span>어린이</span>
        <div class="counter">
          <button onclick="decreaseCount('child')">-</button>
          <span id="child-counter">0</span>
          <button onclick="increaseCount('child')">+</button>
        </div>
      </div>
      <div class="guest-type">
        <span>유아</span>
        <div class="counter">
          <button onclick="decreaseCount('infant')">-</button>
          <span id="infant-counter">0</span>
          <button onclick="increaseCount('infant')">+</button>
        </div>
      </div>
    </div>
    <button class="select-btn" onclick="confirmGuestSelection()">선택</button>
  </div>
</div>

<!-- 배경 오버레이 -->
<div id="overlay" class="overlay" onclick="closeAllModals()"></div>


</main>
<!-- 푸터 삽입 -->
    <div th:replace="fragments/footer :: footerFragment"></div>
</div>
<script>
window.addEventListener('DOMContentLoaded', function() {
  // Thymeleaf에서 span으로 렌더링한 것을 JS 배열로 변환
  const galleryImageList = Array.from(document.querySelectorAll('#gallery-image-list span')).map(span => span.textContent);
  let activeIndex = 0;
  const mainImg = document.getElementById('gallery-main-img');
  const currentSpan = document.getElementById('gallery-current');
  const totalSpan = document.getElementById('gallery-total');
  const prevBtn = document.getElementById('gallery-prev');
  const nextBtn = document.getElementById('gallery-next');
  const progress = document.getElementById('gallery-progress');

  function updateGallery() {
    mainImg.src = galleryImageList[activeIndex];
    currentSpan.innerText = activeIndex + 1;
    totalSpan.innerText = galleryImageList.length;
    prevBtn.disabled = activeIndex === 0;
    nextBtn.disabled = activeIndex === galleryImageList.length - 1;
    progress.style.width = ((activeIndex + 1) / galleryImageList.length * 100) + '%';
  }
  prevBtn.onclick = function() {
    if (activeIndex > 0) { activeIndex--; updateGallery(); }
  };
  nextBtn.onclick = function() {
    if (activeIndex < galleryImageList.length - 1) { activeIndex++; updateGallery(); }
  };
  if(galleryImageList.length > 0) updateGallery();
  else {
    mainImg.src = '/dining/images/no_image.png';
    currentSpan.innerText = 0;
    totalSpan.innerText = 0;
    prevBtn.disabled = true;
    nextBtn.disabled = true;
    progress.style.width = '0%';
  }
});

// 예약 패널 관련 함수들
function openReservationPanel(event) {
  // 기본 동작 방지 (화면 최상단으로 이동 방지)
  if (event) {
    event.preventDefault();
  }
  
  document.getElementById('reservation-panel').classList.add('active');
  document.getElementById('overlay').classList.add('active');
}

function closeReservationPanel() {
  const reservationPanel = document.getElementById('reservation-panel');
  const diningModal = document.getElementById('dining-modal');
  const guestModal = document.getElementById('guest-modal');
  const overlay = document.getElementById('overlay');
  
  // 예약 패널 닫기
  reservationPanel.classList.remove('active');
  
  // 열려있는 모달들도 함께 닫기
  diningModal.classList.remove('active');
  guestModal.classList.remove('active');
  overlay.classList.remove('active');
  
  // 애니메이션 완료 후 모달들 완전히 숨기기
  setTimeout(() => {
    if (!diningModal.classList.contains('active')) {
      diningModal.style.visibility = 'hidden';
    }
    if (!guestModal.classList.contains('active')) {
      guestModal.style.visibility = 'hidden';
    }
  }, 300);
}

function openDiningModal() {
  // 예약 패널이 열려있을 때만 다이닝 모달 열기
  if (document.getElementById('reservation-panel').classList.contains('active')) {
    // 다른 모달이 열려있으면 닫기
    closeGuestModal();
    
    const modal = document.getElementById('dining-modal');
    modal.style.visibility = 'visible'; // visibility 초기화
    modal.classList.add('active');
    document.getElementById('overlay').classList.add('active');
  }
}

function closeDiningModal() {
  const modal = document.getElementById('dining-modal');
  modal.classList.remove('active');
  
  // 애니메이션 완료 후 완전히 숨기기
  setTimeout(() => {
    if (!modal.classList.contains('active')) {
      modal.style.visibility = 'hidden';
    }
  }, 300);
  
  document.getElementById('overlay').classList.remove('active');
}

function openGuestModal() {
  // 예약 패널이 열려있을 때만 인원수 모달 열기
  if (document.getElementById('reservation-panel').classList.contains('active')) {
    // 다른 모달이 열려있으면 닫기
    closeDiningModal();
    
    const modal = document.getElementById('guest-modal');
    modal.style.visibility = 'visible'; // visibility 초기화
    modal.classList.add('active');
    document.getElementById('overlay').classList.add('active');
  }
}

function closeGuestModal() {
  const modal = document.getElementById('guest-modal');
  modal.classList.remove('active');
  
  // 애니메이션 완료 후 완전히 숨기기
  setTimeout(() => {
    if (!modal.classList.contains('active')) {
      modal.style.visibility = 'hidden';
    }
  }, 300);
  
  document.getElementById('overlay').classList.remove('active');
}

function closeAllModals() {
  const reservationPanel = document.getElementById('reservation-panel');
  const diningModal = document.getElementById('dining-modal');
  const guestModal = document.getElementById('guest-modal');
  const overlay = document.getElementById('overlay');
  
  // 모든 모달 닫기
  reservationPanel.classList.remove('active');
  diningModal.classList.remove('active');
  guestModal.classList.remove('active');
  overlay.classList.remove('active');
  
  // 애니메이션 완료 후 완전히 숨기기
  setTimeout(() => {
    if (!diningModal.classList.contains('active')) {
      diningModal.style.visibility = 'hidden';
    }
    if (!guestModal.classList.contains('active')) {
      guestModal.style.visibility = 'hidden';
    }
  }, 300);
}

// 다이닝 선택 관련 함수들
function selectDining(element, name, location) {
  // 모든 다이닝 옵션에서 selected 클래스 제거
  document.querySelectorAll('.dining-option').forEach(option => {
    option.classList.remove('selected');
  });
  
  // 선택된 다이닝에 selected 클래스 추가
  element.classList.add('selected');
  
  // 선택된 다이닝 정보 저장
  window.selectedDining = {
    name: name,
    location: location,
    id: element.getAttribute('data-dining-id')
  };
}

function confirmDiningSelection() {
  if (window.selectedDining) {
    document.getElementById('selected-dining-name').textContent = window.selectedDining.name;
    closeDiningModal();
  }
}

// 인원수 관련 함수들
function increaseCount(type) {
  const counter = document.getElementById(type + '-counter');
  const count = document.getElementById(type + '-count');
  let currentValue = parseInt(counter.textContent);
  
  if (type === 'adult' && currentValue < 10) {
    currentValue++;
  } else if (type === 'child' && currentValue < 10) {
    currentValue++;
  } else if (type === 'infant' && currentValue < 5) {
    currentValue++;
  }
  
  counter.textContent = currentValue;
  count.textContent = currentValue;
}

function decreaseCount(type) {
  const counter = document.getElementById(type + '-counter');
  const count = document.getElementById(type + '-count');
  let currentValue = parseInt(counter.textContent);
  
  if (currentValue > 0) {
    currentValue--;
    counter.textContent = currentValue;
    count.textContent = currentValue;
  }
}

function confirmGuestSelection() {
  closeGuestModal();
}

// 예약 검색 함수
function searchReservation() {
  const diningName = document.getElementById('selected-dining-name').textContent;
  const adultCount = document.getElementById('adult-count').textContent;
  const childCount = document.getElementById('child-count').textContent;
  const infantCount = document.getElementById('infant-count').textContent;
  
  // 여기에 예약 검색 로직 추가
  console.log('예약 검색:', {
    dining: diningName,
    adults: adultCount,
    children: childCount,
    infants: infantCount
  });
  
  // 예약 페이지로 이동하거나 검색 결과를 표시
  // window.location.href = `/diningResv?dining=${encodeURIComponent(diningName)}&adults=${adultCount}&children=${childCount}&infants=${infantCount}`;
}
</script>
</body>
</html>