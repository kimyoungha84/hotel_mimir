<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" th:href="@{/css/header.css}" />
<link rel="stylesheet" th:href="@{/css/footer.css}" />
<style>
body{
margin: 0px; 
}


.north-tab{
height : 32px;
margin-left: 250px;
color: white;
}

.ico {
    display: inline-block;
    vertical-align: middle;
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;
}

.ico-breadcrumb-home {
    width: 1.5rem;
    height: 1.5rem;
    background-image: url('home_img.svg');
    color: white;
}

.main-img{
	position: fixed;
    overflow: hidden;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    max-height: 800px;

}

.main-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(70%);
}

.main-img-txt-area{
	font-size: 60px;
	color: white;
	text-align: center;
	margin-top: 300px;
	font-weight: 500;
}

.content{
	display: -webkit-box;
    display: -webkit-flex;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    align-items: center;
    max-width: 140rem;
    margin-top: 300px;
    background-color: white;
    flex-direction: column; /* 수직으로 배치 */
    

}
.category-wrap{
    display: flex;
    -webkit-box-align: center;
    align-items: center;
    max-width: 140rem;
    margin-right: 300px;
    padding: 0rem 0rem;

}
.category-img {
	position: relative;
	align-items: center;
    width: 25.8rem;
    height: 14.5rem;
    overflow: hidden;
    margin-right: auto;

}
.category-img > img {
	position: absolute;
    top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
    width: 70%;
    height: 70%;
    object-fit: contain;

}

.di-info-wrap{

margin-top: 50px;
display: flex;
width: 70%;

}

.di-info-header{
margin-right: auto;


}

.di-info-header-tit{

text-align: start;


}

.info-list{
  width: 100%;
  margin-top: auto;
  margin-bottom: auto;
  padding: 3rem 0rem;
  border-bottom: 1px solid #333;

}

.list-row{
padding: 4rem 0rem;
border-bottom: 1px solid #dddddd;

}

.info-row{
display: flex;

}

.info-list-wrap{
width:70%;
border-top: 2px solid #333;
}

.list-col-1{
width: 30%;
font-weight: bold;
}

.list-col-2{
}


.menu-wrap{

margin-top: 100px;
width: 70%;
margin-left: auto;
margin-right: auto;


}

.menu-list-wrap{

width: 100%;
border-top : 2px solid #333;


}

.menu-list{
  width: 100%;
  margin-top: auto;
  margin-bottom: auto;
  padding: 3rem 0rem;
  border-bottom: 1px solid #333;

}

.gallery-wrap{
	margin-top: 130px;
	width: 70%;
	margin-left: auto;
	margin-right: auto;

}

.gallery-con{
	width: 70%;
	margin-left: 400px;


}

.gallery-con img{
width: 100%;         /* 이미지가 부모 카드의 너비에 맞게 크기 조정 */
  height: 100%;        /* 이미지가 부모 카드의 높이에 맞게 크기 조정 */
  object-fit: cover;   /* 부모 요소를 덮도록 이미지 크기 조정 (비율 유지) */
  transform-origin: center center;
}

.gallery-carousel {
  display: flex;
  flex-direction: column;
  align-items: flex-end; /* 오른쪽 정렬 */
  margin-left: auto;  
  /* width: auto;  // 필요시 조정 */
}
.gallery-image-area {
  width: 1000px;   /* 더 크게 */
  height: 600px;   /* 더 크게 */
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 2rem;
}
.gallery-image-area img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 1rem;
}
.gallery-controls {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  margin-top: 1.5rem;
}

/* pagination.html에서 가져온 mimir-pg-btn 스타일 */
.mimir-pg-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1.5px solid #222;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.18s, border 0.18s;
  padding: 0;
  position: relative;
}
.mimir-pg-btn:disabled,
.mimir-pg-btn.mimir-pg-disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: #fff;
}
.mimir-pg-btn img {
  width: 18px;
  height: 18px;
  transition: filter 0.18s;
}
.mimir-pg-btn:not(:disabled):not(.mimir-pg-disabled):hover {
  background: #111;
  border: 1.5px solid #111;
  transition: background 0.18s, border 0.18s;
}
.mimir-pg-btn:not(:disabled):not(.mimir-pg-disabled):hover img {
  filter: brightness(0) invert(1);
  transition: filter 0.18s;
}
.gallery-progress-bar {
  width: 120px;
  height: 2px;
  background: #ddd;
  margin-right: 1rem;
  position: relative;
}
.gallery-progress {
  height: 100%;
  background: #222;
  width: 0%;
  position: absolute;
  left: 0; top: 0;
  transition: width 0.3s;
}
.gallery-btn {
  width: 40px; height: 40px;
  border: 1px solid #222;
  border-radius: 50%;
  background: #fff;
  font-size: 1.5rem;
  cursor: pointer;
}
.gallery-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}
.gallery-flex-row {
  display: flex;
  flex-direction: row;
  align-items: flex-start; /* 타이틀, 이미지 위쪽 정렬 */
  width: 100%;
  gap: 2rem;
  /* flex-wrap: wrap;  // 필요시 추가 */
}
.gallery-title {
  margin: 0 2rem 0 0;
  font-size: 2.2rem;
  font-weight: bold;
  min-width: 120px;
  align-self: flex-start;
  /* 왼쪽 정렬 */
}
.additional-info-wrap {
  width: 100%;
  /* margin-left: auto;
  margin-right: auto; */
  margin-top: 130px;
  display: flex;
  flex-direction: column;
}
.additional-info-wrap h2 {
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 1.5rem;
}
.additional-info-content {
  font-size: 1.1rem;
  line-height: 2;
  color: #222;
  white-space: pre-line;
  background: none;
  padding: 0;
  border-radius: 0;
}
.additional-info-wrap .gallery-flex-row {
  margin-top: 0;
}
.additional-info-wrap .gallery-title {
  font-size: 2.2rem;
  font-weight: bold;
  min-width: 120px;
  margin: 0 0 1.5rem 0;
}
.additional-info-content-bg {
  background: #f7f7f7;
  border-radius: 8px;
  padding: 2.5rem 3rem 2.5rem 3rem;
}
.additional-info-content {
  font-size: 1.1rem;
  line-height: 2;
  color: #222;
  white-space: pre-line;
  background: none;
  padding: 0;
  border-radius: 0;
}
.section-divider {
  width: 100%;
  border: none;
  border-top: 1px solid #ddd;
  margin: 40px 0 32px 0;
}
.btn-area {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 60px;
}
.list-btn {
  background: #111;
  color: #fff;
  font-size: 1.1rem;
  font-weight: 500;
  border: none;
  border-radius: 6px;
  padding: 0.9rem 3.5rem;
  cursor: pointer;
  transition: background 0.2s;
}
.list-btn:hover {
  background: #333;
}
.floating-reserve-btn {
  position: fixed;
  right: 40px;
  bottom: 40px;
  width: 140px;
  height: 140px;
  background: #856956;
  border-radius: 50%;
  box-shadow: 0 4px 24px 0 rgba(0,0,0,0.13);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  text-decoration: none;
  transition: box-shadow 0.2s, background 0.2s;
}
.floating-reserve-btn:hover {
  box-shadow: 0 8px 32px 0 rgba(0,0,0,0.18);
  background: #6d5747;
}
.reserve-icon {
  width: 38px;
  height: 38px;
  margin-bottom: 7px;
  display: block;
}
.reserve-text {
  color: #fff;
  font-size: 1.25rem;
  font-weight: 500;
  letter-spacing: -0.5px;
  text-align: center;
  line-height: 1.1;
  text-shadow: 0 1px 2px rgba(0,0,0,0.10);
}
</style>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>
<div id="container">
<main id="content">
<!-- <div class="north-tab">
<i class="ico ico-breadcrumb-home" aria-hidden="true"></i>
<span>  >  다이닝  > <span>스테이,모던 레스토랑</span></span> 
</div> -->

<div class="main-img">
  <img th:src="@{${diningInfo.dining_main_image}}" alt="다이닝 메인 이미지" loading="lazy">
</div>
<div class="main-img-txt-area" th:text="${diningInfo.dining_name}">
스테이, 모던 레스토랑
</div>
<div class="content">
    <div class="category-wrap">
        <div class="category-img">
          <img th:src="@{${diningInfo.dining_logo_image}}" alt="다이닝 로고 이미지" loading="lazy">
        </div>
        <div class="category-copy">
            <p class="txt01">시그니엘 서울 STAY에서 미쉐린 3스타 셰프 야닉 알레노의 특별한 프랑스 요리를 경험해 보시기 바랍니다.</p>
        </div>
    </div> 

    <div class="di-info-wrap">
        <div class="di-info-header">
            <h1 class="di-info-header-tit">다이닝 정보</h1>
        </div>
        <div class="info-list-wrap">
        
        <div class="info-list">
        <div class="info-row">
        <div class="list-col-1">
        타입
        </div>
        <div class="list-col-2" th:text="${diningInfo.type}">
        타입내용
        </div>
        </div>
        </div>
        <div class="info-list">
        <div class="info-row">
        <div class="list-col-1">
        위치
        </div>
        <div class="list-col-2" th:text="${diningInfo.location}">
        위치내용
        </div>
        </div>
        </div>
        <div class="info-list">
        <div class="info-row">
        <div class="list-col-1">
        영업시간
        </div>
        <div class="list-col-2">
        넣을예정
        </div>
        </div>
        </div>
        <div class="info-list">
        <div class="info-row">
        <div class="list-col-1">
        문의 및 예약
        </div>
        <div class="list-col-2" style="display: flex; align-items: center;">
          <span th:text="${diningInfo.phone_number}">프렌치</span>
          <th:block th:if="${#strings.equalsIgnoreCase(#strings.trim(diningInfo.dining_resv_availability), 'Y')}">
            <a th:href="@{/diningResv(diningId=${diningInfo.dining_id})}" style="margin-left: 16px;">
              <button type="button" class="list-btn">예약하기</button>
            </a>
          </th:block>
        </div>
        </div>
        </div>
        </div>
    </div> 
    
    <div class="menu-wrap">
    <h1>대표메뉴</h1>
    <div class="menu-list-wrap">
    <div class="menu-list">
    <div class="info-row">
    <div class="list-col-1">
        타입
    </div>
    <div class="list-col-2">
        프렌치
    </div>
    </div>
    </div>
    <div class="menu-list">
    <div class="info-row">
    <div class="list-col-1">
        타입
    </div>
    <div class="list-col-2">
        프렌치
    </div>
    </div>
    </div>
    <div class="menu-list">
    <div class="info-row">
    <div class="list-col-1">
        타입
    </div>
    <div class="list-col-2">
        프렌치
    </div>
    </div>
    </div>
    <div class="menu-list">
    <div class="info-row">
    <div class="list-col-1">
        타입
    </div>
    <div class="list-col-2">
        프렌치
    </div>
    </div>
    </div>
    
    
    
    </div>
    
    </div>
    
    <div class="gallery-wrap">
      <div class="gallery-flex-row">
        <h1 class="gallery-title">갤러리</h1>
        <div class="gallery-carousel">
        <!-- 이미지가 있을 때  여기가 dining_carousel_images들어갈 에정-->
        <div class="gallery-image-area" th:if="${diningInfo.dining_carousel_images != null and #lists.size(diningInfo.dining_carousel_images) > 0}">
          <img th:src="@{${diningInfo.dining_carousel_images[0]}}" alt="갤러리 이미지" id="gallery-main-img">
        </div>
        <!-- 이미지가 없을 때 -->
        <div class="gallery-image-area" th:if="${diningInfo.dining_carousel_images == null or #lists.size(diningInfo.dining_carousel_images) == 0}">
          <img src="/dining/images/no_image.png" alt="이미지 없음" id="gallery-main-img">
        </div>
        <div class="gallery-controls">
          <!-- 프로그래스바 -->
          <div class="gallery-progress-bar">
            <div class="gallery-progress" id="gallery-progress"></div>
          </div>
          <span id="gallery-index">
            <span id="gallery-current">1</span>/<span id="gallery-total">1</span>
          </span>
          <!-- pagination 스타일 버튼 -->
          <button class="mimir-pg-btn" id="gallery-prev" disabled>
            <img src="/pagination/images/prevPage_enable.svg" alt="이전">
          </button>
          <button class="mimir-pg-btn" id="gallery-next">
            <img src="/pagination/images/nextPage_enable.svg" alt="다음">
          </button>
        </div>
      </div>
      <!-- 갤러리 이미지 리스트(숨김, JS에서 사용) -->
      <div id="gallery-image-list" style="display:none;">
        <span th:each="img : ${diningInfo.dining_carousel_images}" th:text="${img}"></span>
      </div>
    </div>

      <!-- 추가 정보 섹션 -->
      <div class="additional-info-wrap">
        <h1 class="gallery-title">추가 정보</h1>
        <div class="additional-info-content-bg">
          <div class="additional-info-content" th:utext="${additionalInfo}"></div>
        </div>
      </div>
      <hr class="section-divider">
      <div class="btn-area">
        <button type="button" class="list-btn" onclick="window.history.back()">목록</button>
      </div>
</div> 

<!-- 화면 우측 하단 예약하기 플로팅 버튼 -->
<a href="#" class="floating-reserve-btn">
  <img src="/dining/images/reservation_calender.svg" alt="예약 아이콘" class="reserve-icon">
  <span class="reserve-text">예약하기</span>
</a>


</main>
<!-- 푸터 삽입 -->
    <div th:replace="fragments/footer :: footerFragment"></div>
</div>
<script>
window.addEventListener('DOMContentLoaded', function() {
  // Thymeleaf에서 span으로 렌더링한 것을 JS 배열로 변환
  const galleryImageList = Array.from(document.querySelectorAll('#gallery-image-list span')).map(span => span.textContent);
  let activeIndex = 0;
  const mainImg = document.getElementById('gallery-main-img');
  const currentSpan = document.getElementById('gallery-current');
  const totalSpan = document.getElementById('gallery-total');
  const prevBtn = document.getElementById('gallery-prev');
  const nextBtn = document.getElementById('gallery-next');
  const progress = document.getElementById('gallery-progress');

  function updateGallery() {
    mainImg.src = galleryImageList[activeIndex];
    currentSpan.innerText = activeIndex + 1;
    totalSpan.innerText = galleryImageList.length;
    prevBtn.disabled = activeIndex === 0;
    nextBtn.disabled = activeIndex === galleryImageList.length - 1;
    progress.style.width = ((activeIndex + 1) / galleryImageList.length * 100) + '%';
  }
  prevBtn.onclick = function() {
    if (activeIndex > 0) { activeIndex--; updateGallery(); }
  };
  nextBtn.onclick = function() {
    if (activeIndex < galleryImageList.length - 1) { activeIndex++; updateGallery(); }
  };
  if(galleryImageList.length > 0) updateGallery();
  else {
    mainImg.src = '/dining/images/no_image.png';
    currentSpan.innerText = 0;
    totalSpan.innerText = 0;
    prevBtn.disabled = true;
    nextBtn.disabled = true;
    progress.style.width = '0%';
  }
});
</script>
</body>
</html>