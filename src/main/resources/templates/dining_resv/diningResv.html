<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:class="'sub-page'">
<head>
  <meta charset="UTF-8">
  <title>다이닝 예약</title>
  <link rel="stylesheet" th:href="@{/dining_resv/css/diningResv.css}" />
  <link rel="stylesheet" th:href="@{/dining_resv/css/diningPopup1.css}" />
  <link rel="stylesheet" th:href="@{/dining_resv/css/diningPopup2.css}" />
  <link rel="stylesheet" th:href="@{/dining_resv/css/diningPopup4.css}" />
  <link rel="stylesheet" th:href="@{/css/header.css}" />
  <link rel="stylesheet" th:href="@{/css/footer.css}" />
  
</head>
<body>

  <div th:replace="~{fragments/header.html :: header}"></div>

  <div class="banner-container-wrap">
    <img th:src="@{${mainImageUrl}}" alt="다이닝 예약 메인이미지" />
  </div>

  <div class="dining-layout-wrap">

    <div class="dining-list-wrap">

      <div class="dining-top-wrap">
        <div class="dining-row">

          <div class="dining-wrap">
            <div class="hotel-title">
              <span>미미르 호텔</span>
            </div>
            <span class="dining-title" th:text="${diningInfo.dining_name}">다이닝</span>
          </div>

          <div class="detail-wrap">
            <a class="btn btn-detail-txt" th:href="@{/user/dining_detail(diningId=${diningInfo.dining_id})}">
              <span class="btn-txt">자세히 보기</span>
            </a>
            <a class="btn btn-detail" th:href="@{/user/dining_detail(diningId=${diningInfo.dining_id})}">
              <img th:src="@{/dining_resv/images/pageNext.svg}" alt="화살표" class="arrow-icon" />
            </a>
          </div>

        </div>
      </div>

      <div class="dining-info-wrap">
        <div class="dining-info-inner">
          <div class="dining-info-list">

            <div class="dining-info-item">
              <div class="info01"><span>타입</span></div>
              <div class="info02"><span th:text="${diningInfo.type}">타입</span></div>
            </div>

            <div class="dining-info-item">
              <div class="info01"><span>위치</span></div>
              <div class="info02">
                <span th:text="${diningInfo.location}">주소</span>
                <button class="btn btn-info02" type="button" onclick="openMapPopup()"><span>지도보기</span></button>
              </div>
            </div>

            <div class="dining-info-item">
              <div class="info01"><span>문의</span></div>
              <div class="info02"><span th:text="${diningInfo.phone_number}">전화(문의)번호</span></div>
            </div>

            <div class="dining-info-item">
              <div class="info01"><span>소개</span></div>
              <div class="info02">
                <span th:text="${diningInfo.dining_introduction}">다이닝 소개</span>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="tab-btn-wrap">
        <button class="tab-btn-scheduler active" type="button">예약</button>
        
        <button class="tab-btn-menu" type="button" th:attr="style=${diningInfo.dining_id == 3} ? 'display:none;' : ''">
          메뉴
        </button>
      </div>

      <div id="title" class="tab-title"><span>예약일 선택</span></div>

<div class="tap-wrap">
  <div class="tab-content">
    <div id="scheduler" class="tab-scheduler" style="display: block;">
	  <!-- 달력 -->
    </div>
    
	  <div id="menu" class="tab-menu" th:attr="style=${diningInfo.dining_id == 3} ? 'display:none;' : 'display:none;'">
  		<!-- Lunch (중식) -->
  		<div class="menu-info-item">
    	  <div class="menu01"><span>Lunch</span></div>
    		<div class="price-group">
      		  <div class="price01" th:each="menu : ${menuList}" th:if="${menu.description == '중식'}">
        		<span th:text="${menu.menu_name}"></span><br />
        		<span th:text="${#numbers.formatInteger(menu.price, 3, 'COMMA') + ' KRW'}"></span>
      		  </div>
    		</div>
  		</div>

  		<!-- Dinner (석식) -->
  		<div class="menu-info-item">
    	  <div class="menu01"><span>Dinner</span></div>
    		<div class="price-group">
      		  <div class="price01" th:each="menu : ${menuList}" th:if="${menu.description == '석식'}">
       		 	<span th:text="${menu.menu_name}"></span><br />
        		<span th:text="${#numbers.formatInteger(menu.price, 3, 'COMMA') + ' KRW'}"></span>
      		  </div>
    		</div>
  		</div>
	  </div>
  </div>

        <div class="select-day-wrap">
          <span class="icon-txt">◆</span>
          <span class="day-txt">선택 날짜</span>
        </div>
      </div>

      <div class="scheduler-content-wrap">
        <div class="reservation-txt"><span>예약시간 선택</span></div>

        <div class="time-group">
          <div class="lunch-txt">
  			<span>Lunch</span>
  			<span id="lunchQtyDisplay" class="qty-display"></span>
		  </div>

          <div class="time-lunch">
			<div class="time-lunch-btn" id="lunchTimeContainer"></div>
          </div>

          <div class="Dinner-txt">
  			<span>Dinner</span>
  			<span id="dinnerQtyDisplay" class="qty-display"></span>
		  </div>

          <div class="time-Dinner">
			<div class="time-Dinner-btn" id="dinnerTimeContainer"></div>
          </div>
        </div>
        
      </div>

      <div class="reservation-note-wrap">
        <div class="note-txt"><span>예약 유의사항</span></div>
          <div class="note-item"><span class="note-ico">▷</span><span>야닉 알레노 셰프의 미쉐린 3스타 레스토랑 파비용 르두아앵(Pavillon Ledoyen)의 메뉴</span></div>
          <div class="note-item"><span class="note-ico">▷</span><span>디너 이용 시 만12세 이하의 어린이 입장이 제한</span></div>
          <div class="note-item">
            <span class="note-ico">▷</span><span>
       	      드레스코드 : 비지니스 캐쥬얼 / 최상의 격식을 갖춘 서비스를 제공하기 위해 입장 시<br />
              반바지, 조거팬츠, 트레이닝 팬츠와 블로퍼, 슬러퍼, 샌들 착용을 제한
            </span>
          </div>
          <div class="note-item"><span class="note-ico">▷</span><span>온라인 예약은 신청 후 *예약확정*을 받으셔야 방문이 가능 (예약 확정 시 전화 또는 문자가 발송)</span></div>
      </div>

    </div>

    <div class="reservation-next-wrap">
      <div class="reservation-next">

        <div class="reservation-info01">
          <div class="hotel-name"><span>미미르 호텔</span></div>
          <button class="dining-name-btn" type="button" id="openDiningPopup">
            <span class="dining-name-txt" th:text="${diningInfo.dining_name}">다이닝</span>
            <span class="arrow">➤</span>
          </button>
        </div>

        <div class="reservation-info02">
          <div class="reservation-cnt"><span>예약 인원</span></div>
          <button class="cnt-btn" type="button" id="openCntPopup">
  			<span class="cnt-btn-txt">
    		성인 <span class="cnt-adult-txt" th:text="${adult}"></span>, 어린이 <span class="cnt-child-txt" th:text="${child}"></span>
  			</span>
            <span class="arrow">➤</span>
          </button>
        </div>

      </div>

      <div class="next-txt">
        <form id="reservationForm" method="get" th:action="@{/diningNextResv}">
          <input type="hidden" name="diningId" id="inputDining" th:value="${selectDiningId}" />
          <input type="hidden" name="adult" id="inputAdult" th:value="${adult}" />
          <input type="hidden" name="child" id="inputChild" th:value="${child}" />
          <input type="hidden" name="date" id="inputDate" />
          <input type="hidden" name="time" id="inputTime" />
          <input type="hidden" name="meal" id="inputMeal" />
          <button type="submit" class="next-btn disabled" aria-disabled="true">다음</button>
        </form>
      </div>
    </div>
  </div>
  
<!-- 메뉴 수량 선택 모달 -->
<div class="popup-overlay05" style="display: none;"
	th:if="${selectDiningId != 3}">
  <div class="menu-qty-popup">
    <div class="popup-header">
      <span id="menuPopupTitle">메뉴 수량 선택</span>
    </div>
    <div class="popup-body">
      <label>수량:
        <input type="number" id="menuQtyInput" min="1" max="10" value="1" />
      </label>
    </div>
    <div class="popup-footer">
      <button type="button" class="btn-confirm-menu">확인</button>
      <button type="button" class="btn-cancel-menu">취소</button>
    </div>
  </div>
</div>

  <!-- 다이닝 선택 팝업 -->
  <div class="popup-overlay01"></div>

  <div class="dining-popup">
    <button class="popup-close01" type="button">×</button>

    <div class="popup-row">
      <div class="popup-txt">
        <span>다이닝 선택</span>
      </div>

      <div class="popup-wrap">
        <div class="popup-info01">
          <div class="popup-content">
            <div class="hotel-select-txt"><span>호텔 선택</span></div>
            <div class="hotel-list">
              <div class="hotel-item">
                <button class="hotel-btn selected" data-name="미미르 호텔"><span>미미르 호텔</span></button>
              </div>
            </div>
          </div>
        </div>

        <div class="popup-info02">
          <div class="dining-select-txt"><span>다이닝 선택</span></div>

          <div class="dining-list">
            <div class="dining-info01">
              <div class="dining-item"
                th:each="dining : ${diningList}"
                th:attr="data-id=${dining.dining_id}"
                th:classappend="${dining.dining_id == selectDiningId} ? ' selected' : ''">

                <img th:src="@{${dining.dining_main_image}}" alt="다이닝 이미지" class="dining-img" />
                <div class="dining-info-txt">
                  <span class="title-txt" th:text="${dining.dining_name}">다이닝</span>
                  <div class="type-info">
                    <span class="type-txt01">타입</span>
                    <span class="type-txt02" th:text="${dining.type}">타입</span>
                  </div>
                  <div class="location-txt">
                    <span class="location-txt01">위치</span>
                    <span class="location-txt02" th:text="${dining.location}">위치</span>
                  </div>
                </div>
                <div class="checkmark"></div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="dining-select-btn">
      <button class="diningBtn" type="button">선택</button>
    </div>
  </div>
  
    <!-- 인원 선택 팝업 -->
  <div class="popup-overlay02"></div>
  <div class="cnt-popup">
    <button class="popup-close02" type="button">×</button>
    <div class="cnt-popup-wrap">
      <div class="cnt-txt">
        <span>인원 수</span>
      </div>
      <div class="cnt-popup-body">
        <div class="cnt-group01">
          <span>성인</span>
          <div class="cnt-adult-btn">
            <button class="minus" type="button" data-type="adult">-</button>
            <span id="adultCnt" th:text="${adult}"></span>
            <button class="plus" type="button" data-type="adult">+</button>
          </div>
        </div>
        <div class="cnt-group02">
          <span>어린이</span>
          <div class="cnt-child-btn">
            <button class="minus" type="button" data-type="child">-</button>
            <span id="childCnt" th:text="${child}"></span>
            <button class="plus" type="button" data-type="child">+</button>
          </div>
        </div>
      </div>
    </div>
    <div class="cnt-select-btn">
      <button class="cntBtn" type="button">선택</button>
    </div>
  </div>
  
    <!-- 다이닝 지도 팝업 -->
  <div class="popup-overlay04" style="display: none;">
    <div class="popup-content04">
      <button class="popup-close04" type="button">×</button>

      <div class="map-popup-inner">
        <div class="map-txt">
          <span>지도 보기</span>
        </div>
        <iframe
          width="100%"
          height="300"
          style="border:0;"
          loading="lazy"
          allowfullscreen
          src="https://www.google.com/maps?q=37.4993192768461,127.033205638158&hl=ko&z=15&output=embed">
        </iframe>
      </div>

      <div class="addr-wrap">
        <div class="addr-inner">
          <div class="hotel-name">
            <span>미미르 호텔</span>
          </div>
          <div class="dining-name">
            <span th:text="${diningInfo.dining_name}"></span>
          </div>
          <div class="addr-txt">
            <span th:text="${diningInfo.location}"></span>
          </div>
        </div>
      </div>

      <div class="check-btn">
        <button class="checkBtn" type="button">확인</button>
      </div>

    </div>
  </div>
  
<script th:inline="javascript">
  /*<![CDATA[*/
  var selectDiningId = '[[${selectDiningId}]]';
  /*]]>*/
</script>
  
  <div th:replace="~{fragments/footer.html :: footerFragment}"></div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script th:src="@{/dining_resv/js/diningResv.js}"></script>
  <script th:src="@{/dining_resv/js/calendar.js}"></script>
  <script th:src="@{/dining_resv/js/diningPopup1.js}"></script>
  <script th:src="@{/dining_resv/js/diningPopup2.js}"></script>
  <script th:src="@{/dining_resv/js/diningPopup4.js}"></script>
  
</body>

</html>